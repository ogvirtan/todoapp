{% extends "layout.html" %}

{% block title %}Edit task{% endblock %}

{% block content %}
<h1>Muokkaa taskia</h1>
<form action="/createcategory" method="post">
  <p>Uusi luokittelu:
    <input type="text" name="category_new" maxlength="40" required>
    <input type="hidden" name="next_page" value="{{ request.path }}">
    <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}" />
    <input type="submit" value="Lisää">
  </p>
</form>
<form action="/edit/{{ task.id }}" method="post">
  {% if categories %}
  <p>Luokittelut:<br />
    {% for category in categories %}
    <label>
      <input type="checkbox" name="category_select" value="{{ category }}" {% if category in checked %}checked{% endif %}>
      {{ category|capitalize }}
    </label><br>
    {% endfor %}
    {% else %}
  <p>Käyttäjällesi ei ole vielä lisätty luokitteluja <br />
    {% endif %}
  <p>
    Taskin otsikko: <br />
    <input type="text" name="task" value="{{ task.task }}" maxlength="40" required />
  </p>
  <p>
    Taskin sisältö:<br />
    <textarea name="body" rows="5" cols="40" required>{{ task.body }}</textarea>
  </p>
  <p>
    Taskin tila: Tehty
    <input type="radio" name="status" value="1" {% if task.task_status==1 %}checked{% endif %} />
    Kesken
    <input type="radio" name="status" value="0" {% if task.task_status==0 %}checked{% endif %} />
  </p>
  <input type="submit" value="Lähetä" />
  <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}" />
  </form>
  {% endblock %}